<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{TITLE}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/4.6.0/echarts-en.min.js"></script>
    <script type="text/javascript" rel="script" src="js/index.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootswatch/4.3.1/darkly/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="css/main.css" />
</head>
<body onload="onPageLoad();">
<nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">
    <img id="icon" src="img/poolIcon.png" width="30" height="30" class="d-inline-block align-top" alt="">
    {TITLE}
    </a>
    <div class="navbar-header">
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
    </div>
    <div class="collapse navbar-collapse" id="navbarContent">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active">
                <a class="nav-link" href="#" onclick="getWonBlocks()" data-toggle="modal" data-target="#wonBlocksModal"><i class="fa fa-trophy" title="BLOCKS WON"></i> BLOCKS WON</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="#" data-toggle="modal" data-target="#infoModal"><i class="fa fa-sign-in"></i> HOW TO JOIN</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="#" data-toggle="modal" data-target="#confModal"><i class="fa fa-sliders"></i> CONFIGURE</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="{EXPLORER}" target="_blank"><i class="fa fa-external-link"></i> EXPLORER</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="{FAUCET}" target="_blank"><i class="fa fa-shower"></i> FAUCET</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="https://github.com/jjos2372/babel-pool" target="_blank"><i class="fa fa-github"></i> CODE</a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="{PUBLICNODE}" target="_blank">
                    <i class="fa fa-money"></i> WALLET
                </a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="{DISCORD}" target="_blank">
                	<i class="fa fa-comment"></i> DISCORD
                </a>
            </li>
        </ul>
    </div>
</nav>
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-6 text-center">
                <div class="row">
                            <div class="col-lg-3 col-md-6 p-3">
                    <div class="col-xl-12 bg-light border-top border-right border-left rounded-top p-2 overflow-auto">
                        <p class="d-inline">Block Height</p>
                    </div>
                    <div class="col-xl-12 border-bottom border-right border-left rounded-bottom p-2 overflow-auto">
                        <p class="d-inline" id="blockHeight">Loading...</p>
                    </div>
                </div>
            
                <div class="col-lg-3 col-md-6 p-3">
                    <div class="col-xl-12 bg-light border-top border-right border-left rounded-top p-2 overflow-auto">
                        <p class="d-inline">Elapsed</p>
                    </div>
                    <div class="col-xl-12 border-bottom border-right border-left rounded-bottom p-2 overflow-auto">
                        <p class="d-inline" id="currentRoundElapsed">Loading...</p>
                    </div>
                </div>
                <!--
                <div class="col-lg-3 col-md-6 p-3">
                    <div class="col-xl-12 bg-light border-top border-right border-left rounded-top p-2 overflow-auto">
                        <p class="d-inline">Best Deadline</p>
                    </div>
                    <div class="col-xl-12 border-bottom border-right border-left rounded-bottom p-2 overflow-auto">
                        <p class="d-inline" id="bestDeadline">Loading...</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 p-3">
                    <div class="col-xl-12 bg-light border-top border-right border-left rounded-top p-2 overflow-auto">
                        <p class="d-inline">Best Nonce</p>
                    </div>
                    <div class="col-xl-12 border-bottom border-right border-left rounded-bottom p-2 overflow-auto">
                        <p class="d-inline" id="bestNonce">Loading...</p>
                    </div>
                </div>
                -->
                <div class="col-lg-6 col-md-6 p-3">
                    <div class="col-xl-12 bg-light border-top border-right border-left rounded-top p-2 overflow-auto">
                        <p class="d-inline">Best Miner</p>
                    </div>
                    <div class="col-xl-12 border-bottom border-right border-left rounded-bottom p-2 overflow-auto">
                        <p class="d-inline" id="bestMiner">Loading...</p>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6 p-3">
                    <div class="col-xl-12 bg-light border-top border-right border-left rounded-top p-2 overflow-auto">
                        <p class="d-inline">Network</p>
                    </div>
                    <div class="col-xl-12 border-bottom border-right border-left rounded-bottom p-2 overflow-auto">
                        <p class="d-inline" id="netDiff">Loading...</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 p-3">
                    <div class="col-xl-12 bg-light border-top border-right border-left rounded-top p-2 overflow-auto">
                        <p class="d-inline">Miners</p>
                    </div>
                    <div class="col-xl-12 border-bottom border-right border-left rounded-bottom p-2 overflow-auto">
                        <p class="d-inline" id="minerCount">Loading...</p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 p-3">
                    <div class="col-xl-12 bg-light border-top border-right border-left rounded-top p-2 overflow-auto">
                        <p class="d-inline">Pool Physical</p>
                    </div>
                    <div class="col-xl-12 border-bottom border-right border-left rounded-bottom p-2 overflow-auto">
                        <p class="d-inline" id="poolCapacity">Loading...</p>
                    </div>
                </div>
                <div class="col-xl-12">
                    <div class="row">
                        <div class="col-xl-6 col-lg-6 col-md-8 p-3">
                            <input type="text" id="addressInput" class="form-control" placeholder="S-XXXX-XXXX-XXXX-XXXXX">
                        </div>
                        <div class="col-xl-3 col-lg-3 col-md-2 col-6 overflow-auto text-nowrap p-3">
                            <button class="btn btn-primary btn-block" data-toggle="modal" data-target="#minerInfoModal" id="getMinerButton">MINER DETAILS</button>
                        </div>
                        <div class="col-xl-3 col-lg-3 col-md-2 col-6 overflow-auto text-nowrap p-3">
                            <button class="btn btn-primary btn-block" data-toggle="modal" data-target="#poolInfoModal">POOL INFO</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-lg-6 position-relative w-100" style="min-height: 300px;">
            <canvas id="sharesChart" width="600" height="300"></canvas>
        </div>
    </div>
</div>
<br />
<div class="table-responsive p-lg-3 w-100">
    <table id="miners" class="table table-striped table-bordered">
        <tr>
            <td colspan="6">Loading...</td>
        </tr>
    </table>
    <p><a href="https://github.com/signum-network" target="_blank">Signum Network.</a></p>
    <p>Copyright Â© 2019 <a href="https://github.com/harry1453" target="_blank">harry</a>; 2020-2021 <a href="https://github.com/jjos2372" target="_blank">jjos</a>
    </p>
</div>

<!-- Modals -->
<div class="modal fade" id="minerInfoModal" tabindex="-1" role="dialog" aria-labelledby="minerInfoTitle" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="minerInfoTitle">MINER DETAILS</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="table-responsive w-100">
                    <table class="table table-striped">
                        <tr>
                            <td>Miner Address</td><td><span id="minerAddress">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Miner Name</td><td><span id="minerName">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Pending Balance</td><td><span id="minerPending">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Minimum Payout</td><td><span id="minerMinimumPayout">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Share Model</td><td><span id="minerSharePercent">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Donation Percent</td><td><span id="minerDonationPercent">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Effective Capacity</td><td><span id="minerCapacity">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Commitment/TiB</td><td><span id="minerCommitment">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Commitment Ratio</td><td><span id="minerCommitmentRatio">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Commitment Factor</td><td><span id="minerCommitmentFactor">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Effective Shared</td><td><span id="minerSharedCapacity">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Confirmed Deadlines</td><td><span id="minerNConf">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Pool Share</td><td><span id="minerShare">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Software</td><td><span id="minerSoftware">Loading...</span></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="poolInfoModal" tabindex="-1" role="dialog" aria-labelledby="poolInfoTitle" aria-hidden="true">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="poolInfoTitle">POOL INFO</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="table-responsive w-100">
                    <table class="table table-striped">
                        <tr>
                            <td>Pool Name</td><td><span id="poolName">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Pool Account</td><td><span id="poolAccount">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Number of Blocks for Averages</td><td><span id="nAvg">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Number of Blocks to Show a Miner</td><td><span id="nMin">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Max Deadline</td><td><span id="maxDeadline">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Process Lag</td><td><span id="processLag">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Fee Recipient</td><td><span id="feeRecipient">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Pool Fee</td><td><span id="poolFee">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Donation Recipient</td><td><span id="donationRecipient">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Default Donation (configurable)</td><td><span id="donationPercent">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Default Pool Share (configurable)</td><td><span id="poolShare">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Default Minimum Payout (configurable)</td><td><span id="minimumPayout">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Minimum Payouts at once</td><td><span id="minPayoutsAtOnce">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Payout Transaction Fee</td><td><span id="payoutTxFee">Loading...</span></td>
                        </tr>
                        <tr>
                            <td>Pool Software Version</td><td><span id="poolVersion">Loading...</span></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="wonBlocksModal" tabindex="-1" role="dialog" aria-labelledby="wonBlocksTitle" aria-hidden="true">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="wonBlocksTitle">BLOCKS WON</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="table-responsive w-100">
                    <table class="table table-striped" id="wonBlocksTable"></table>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="infoModal" tabindex="-1" role="dialog" aria-labelledby="helpTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="helpTitle">HOW TO JOIN</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                {INFO}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="confModal" tabindex="-1" role="dialog" aria-labelledby="helpTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="confTitle">CONFIGURE</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>If you have already joined the pool, you can further configure it by sending <b>unencrypted text messages</b> from your miner account to the pool account (effective after {LAG} blocks):<br>
                <code><b>{POOL_ACCOUNT}</b></code></p>
                   
                <h5 class="modal-title">Share Model</h5>
                <p>Change your share model to 80 % by sending the following text message (any number from 0 up to 100 is accepted):<br>
                <code>share 80</code><br>
                </p>

                <h5 class="modal-title">Donation Percent</h5>
                <p>Change your donation percent to 5 % by sending the following text message (any number from 0 up to 100 is accepted):<br>
                <code>donate 5</code><br>
                </p>

                <h5 class="modal-title">Minimum Payout</h5>
                <p>Change your minimum payout to 100 SIGNA by sending the following text message (any number higher than {MIN_PAYOUT} is accepted):<br>
                <code>pay 100</code><br>
                </p>
                
                <p>You can also configure multiple parameters with a single message, for instance:<br>
                <code>share 80 donate 5 pay 100</code><br>
                </p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>
</body>
</html>
